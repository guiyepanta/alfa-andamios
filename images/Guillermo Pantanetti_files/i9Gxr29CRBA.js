/*!CK:3992583103!*//*1410155034,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Ym4c\/"]); }

__d("PlatformOptInPopup",["PopupWindow","URI","copyProperties"],function(a,b,c,d,e,f,g,h,i){var j=function(){};i(j,{DIALOG_URL:'/connect/uiserver.php',DIALOG_WIDTH:420,DIALOG_HEIGHT:450,APP_ID:127760087237610,open:function(k,l,m){if(!k)k='generic';if(!l)l='plugin.optin';var n=new h(j.DIALOG_URL);n.addQueryData({social_plugin:k,method:l,display:'popup',secure:h.getRequestURI().isSecure(),app_id:j.APP_ID});if(m)n.addQueryData(m);return g.open(n.toString(),j.DIALOG_WIDTH,j.DIALOG_HEIGHT);}});e.exports=j;},null);
__d("Feedback",["AsyncRequest","CSS","Dialog","DOM","Event","Input","LegacyContextualDialog","MentionsInput","Parent","PlatformOptInPopup","Style","Vector","$","ge","tx"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){var v={comments:{},registerComment:function(w,x){v.comments[w]=x;return v;},getRegisteredComment:function(w){return v.comments[w];},deleteClickHandler:function(w,x,y,z,aa,ba){var ca=new i().setTitle("\u00bfEliminar mensaje?").setBody("\u00bfEst\u00e1s seguro de que quieres borrar esta publicaci\u00f3n?").setButtons([i.newButton('delete',"Eliminar"),i.CANCEL]).setHandler(function(event){new g().setURI('/ajax/connect/feedback.php').setData({command:'delete',url:w,uniqid:z,owns_pages:aa,controller_id:y,locale:ba,comment_id:x}).send();}.bind(this)).show();},attachAddCommentListener:function(w,x){var y=s(w);k.listen(y,'click',function(){var z=s(x);h.removeClass(z,'hidden_elem');j.find(z,'textarea').focus();h.addClass(y,'hidden_elem');v.resizeCommentas(z);return false;});},resizeCommentas:function(w){var x=j.scry(w,'div.post')[0];if(x){var y=r.getElementDimensions(x).x;if(y){var z=j.find(x,'.commentas'),aa=r.getElementDimensions(z).x;if((y-aa)<190&&(y-190)>60){q.set(z,'width',y-190+'px');var ba=j.scry(z,'span.commentas_inner')[0];if(ba){var ca=r.getElementDimensions(ba).x;q.set(z,'width',ca+'px');}}}}},exposeContextualDialogReply:function(w){var x=s(w),y=x.parentNode.parentNode;h.show(j.find(y,"form.composerReply"));j.find(y,"textarea").focus();return false;},concealContextualDialogReply:function(w){var x=s(w),y=x.parentNode.parentNode,z=j.find(y,"form"),aa=j.find(y,"textarea"),ba=aa.value.length;if(!l.getValue(aa))h.hide(z);return false;},closeContextualDialog:function(w){var x=m.getInstance(s(w));x.hide();return false;},_clickLocked:false,attachOptInClickListener:function(w){k.listen(w,'click',function(x){k.kill(x);if(!this._clickLocked){this._clickLocked=true;setTimeout(function(){this._clickLocked=false;}.bind(this),1000);p.open('feedback','plugin.optin');}});},attachReplyListener:function(w){var x=t(w);if(!x)return;var y=j.find(x,'textarea');x.suppressBlur=false;k.listen(x,'click',function(z){var aa=z.getTarget(),ba=o.byClass(aa,'commentas')!==null,ca=o.byClass(aa,'uiButton')!==null,da=o.byClass(aa,'uiSelector')!==null;x.suppressBlur=ba||ca||da;});k.listen(y,'blur',function(z,aa){if(x.interval)return;x.interval=setInterval((function(ba,ca){if(ba.suppressBlur||l.getValue(ca)||ca==document.activeElement)return;h.hide(ba);ba.suppressBlur=false;clearInterval(ba.interval);delete ba.interval;}).bind(null,x,z),100);}.bind(null,y));},attachReplyClickListenerToReply:function(w,x,y){var z=t(w);if(z){var aa=j.scry(z,'form.composerReply')[0];v.attachReplyClickListener(aa,x,y);}},attachReplyClickListenerToPost:function(w,x,y){var z=t(w);if(z){var aa=j.scry(o.byTag(z,'div'),'form.composerReply')[0];v.attachReplyClickListener(aa,x,y);}},attachReplyClickListener:function(w,x,y){if(!w)return;var z=s(x),aa=j.find(w,'textarea');k.listen(z,'click',function(ba){h.show(w);aa.focus();var ca=o.byClass(ba.target,'fbFeedbackPost').id,da=document.createElement("input");da.setAttribute("type","hidden");da.setAttribute("name","replied_to");da.setAttribute("value",ca);w.appendChild(da);setTimeout((function(){var ea=n.getInstance(aa);if(!y.isViewer&&y.isReply)if(ea){var fa=ea.getMentions();if(!fa[y.uid]&&l.getValue(aa)==='')ea.addMention(y);}else l.setValue(aa,y.text+' ');ba.preventDefault();}).bind(this),0);});},resetInput:function(w){var x=n.getInstance(w);if(x)x.reset();l.setValue(w,'');},attachPublishConfirmHandler:function(w,x,y){k.listen(w,'click',function(z){z.preventDefault();j.remove(x);window.open(y,'confirm_comment_story','scrollbars=0,resizable=no,toolbar=0,width=600,height=400');});}};e.exports=a.Feedback||v;},null);
__d("WindowComm",["URI"],function(a,b,c,d,e,f,g){var h={_callbacks:{},makeHandler:function(i,j,k){j=j||'opener';if(!k)k='f'+(Math.random()*(1<<30)).toString(16).replace('.','');h._callbacks[k]=i;return new g('/connect/window_comm.php').setQueryData({_id:k,_relation:j}).getQualifiedURI().toString();},_recv:function(i){var j=new g(i).getQueryData();h._callbacks[j._id](j);}};e.exports=h;a.WindowComm=h;},null);
__d("OpenIDRequest",["AsyncRequest","AsyncSignal","URI","UserAgent_DEPRECATED","PHPQuerySerializer","coalesce","copyProperties","createArrayFrom"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){function o(){var p=new g().setReadOnly(true).setHandler(this.asyncResponseHandler.bind(this)).setErrorHandler(this.asyncErrorHandler.bind(this));m(this,{openidUrl:null,requestId:o.maxRequestId++,successResponseHandler:null,cancelHandler:null,intermediateHandler:null,immediateMode:false,useExtensions:true,thirdPartyLogin:false,popupWindow:null,asyncRequest:p,retryCount:0});o.requests[this.requestId]=this;}o.getRequestById=function(p){return o.requests[p];};o.prototype.setOpenIDUrl=function(p){this.openidUrl=p;return this;};o.prototype.setSuccessHandler=function(p){this.successResponseHandler=p;return this;};o.prototype.setErrorHandler=function(p){this.errorHandler=p;return this;};o.prototype.setCancelHandler=function(p){this.cancelHandler=p;return this;};o.prototype.setImmediateMode=function(p){this.immediateMode=p;return this;};o.prototype.setUseExtensions=function(p){this.useExtensions=p;return this;};o.prototype.setIntermediateHandler=function(p){this.intermediateHandler=p;return this;};o.prototype.setThirdPartyLogin=function(p){this.thirdPartyLogin=p;return this;};o.prototype.send=function(){if(!this.openidUrl)throw "openidUrl is a required parameter. Call setOpenIDUrl()";var p=this.calculateRedirectUrl();if(!p){this.logMetrics('redirectUrlNotFound');return;}if(this.immediateMode){this.createHiddenIframe(p);}else{if(this.popupWindow)throw "OpenID popup is already in progress";this.showPopup(p);}this.logMetrics('requestSent');};o.prototype.calculateRedirectUrl=function(p){var q=this.immediateMode?'checkid_immediate':'checkid_setup',r={'openid.mode':q},s;if(!o.cache[this.openidUrl])return null;s=o.cache[this.openidUrl].url;var t=i(i(s).getQueryData()['openid.return_to']);t.addQueryData({context:o.context,request_id:this.requestId});r['openid.return_to']=t.toString();r.third_party_login=this.thirdPartyLogin;return i(s).addQueryData(r).getQualifiedURI();};o.prototype.createHiddenIframe=function(p){var q='openid_request_'+this.requestId,r=document.body.appendChild(document.createElement('div')),s=function(){r.innerHTML=('<iframe name="'+q+'"'+' src="'+p.toString()+'"'+' scrolling="no" '+' frameborder="0" class="hidden_elem"></iframe>');};if(j.ie()){r.innerHTML='<iframe src="javascript:false"></iframe>';setTimeout(s,0);}else s();};o.prototype.showPopup=function(p){var q;if(o.cache[this.openidUrl])q=o.cache[this.openidUrl].popup_dimensions;if(!q||!q.height||!q.width)q={height:'580',width:'790'};var r={x:l(window.screenX,window.screenLeft),y:l(window.screenY,window.screenTop),width:l(window.outerWidth,document.body.clientWidth),height:l(window.outerHeight,document.body.clientHeight)},s=r.x+((r.width-q.width)/2),t=r.y+((r.height-q.height)/2),u=["location=yes","scrollbars=1","left="+s,"top="+t,"resizable=yes","height="+q.height,"width="+q.width].join(",");this.popupWindow=window.open(p.toString(),'_blank',u);this.popupPollInterval=setInterval(this.pollPopupWindow.bind(this),100);this.popupWindow.focus();};o.prototype.pollPopupWindow=function(){if(!(this.popupPollInterval&&this.popupWindow))return;if(this.popupWindow.closed){clearInterval(this.popupPollInterval);this.cancel();}};o.prototype.closePopupIfOpen=function(){if(this.popupWindow){if(this.popupPollInterval)clearInterval(this.popupPollInterval);this.popupWindow.close();}this.popupWindow=null;};o.prototype.cancel=function(){this.closePopupIfOpen();if(this.cancelHandler)this.cancelHandler();this.logMetrics('requestCanceled');};o.prototype.logMetrics=function(p){new h('/ajax/openid/metrics.php',{metric:p,immediate:this.immediateMode,context:o.context,openid_url:this.openidUrl}).send();};o.prototype.triggerCompleteAuthAsync=function(p){if(p.charAt(0)=='?'||p.charAt(0)=='&')p=p.substr(1);var q=k.deserialize(p);this.closePopupIfOpen();if(q['openid.mode']=='cancel'){this.cancel();return;}if(this.intermediateHandler)this.intermediateHandler();this.asyncRequest.setData({openid_params:q}).send();};o.prototype.asyncResponseHandler=function(p){var q=p.getPayload();if(this.successResponseHandler)this.successResponseHandler(q);this.closePopupIfOpen();};o.prototype.cleanHandleResponse=function(p){if(p.css)p.css=n(p.css);this.asyncRequest.handleResponse(p);};o.prototype.asyncErrorHandler=function(p){this.closePopupIfOpen();if(p.error==1428010||p.error==1428011){this.cancel();return;}if(this.errorHandler)this.errorHandler(p);};o.prototype.retry=function(){++this.retryCount;this.requestId=o.maxRequestId++;this.send();};o.prototype.setProviderCache=function(p){o.cache=p;return this;};o.cache={};o.requests=[];o.maxRequestId=0;o.context='default';e.exports=o;},null);
__d("WidgetArbiter",["createArrayFrom"],function(a,b,c,d,e,f,g){var h={_findSiblings:function(){if(h._siblings)return;h._siblings=[];for(var i=parent.frames.length-1;i>=0;i--)try{if(parent.frames[i]&&parent.frames[i].Arbiter&&parent.frames[i].Arbiter.inform)h._siblings.push(parent.frames[i].Arbiter);}catch(j){}},inform:function(){h._findSiblings();var i=g(arguments);h._siblings.forEach(function(j){j.inform.apply(j,i);});}};e.exports=h;},null);
__d("CommentAdminPanelController",["Arbiter","AsyncRequest","Button","ChannelConstants","CSS","DOM","Event","Feedback","Parent","Toggler","URI","Vector","$","copyProperties","ge","startsWith","XD","MultiLoginPopup"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){var w=b('XD').UnverifiedXD,x=function(y){t(this,{locale:y.locale,channel:y.channel,controllerID:y.controllerID,commentIDs:y.commentIDs,domIDs:y.domIDs,duplicateComments:[],fetchMoreCommentsIsPending:{},blacklistedActors:y.blacklistedActors,actorToCommentInfoMap:y.actorToCommentIDMap,commentInfoMap:y.commentInfoMap,inAggregatedView:y.inAggregatedView,inModerationQueue:y.inModerationQueue,inContextualDialog:y.inContextualDialog,isTopLevelCommentPollingEnabled:false,loggedIn:y.loggedIn,newestCommentTimestamp:y.newestCommentTimestamp,realTimePollingParams:{},userOwnsPages:y.userOwnsPages,recentlyBlacklistedActors:y.blacklistedActors});g.subscribe(j.getArbiterType('comments_plugin_new_post'),function(z,aa){if(aa.obj.target===this.realTimePollingParams.target){if(u(aa.obj.comment_element_id))return;var ba=t({},this.realTimePollingParams);ba.post_fbid=aa.obj.post_fbid;var ca=aa.obj.parent_comment_id;if(ca){var da=u(ca);if(!da)return;var ea=l.scry(da,'.fbFeedbackPager.uiMorePager');if(ea.length>0)return;ba.parent_comment_id=ca;ba.is_reply_thread=true;}else{if(!this.isTopLevelCommentPollingEnabled)return;ba.is_reply_thread=false;}this.pollForComments(ba);}}.bind(this));this.controlledRegion=s(this.controllerID);this.attachClickHandlers();if(this.inModerationQueue)this.registerModeratorQueueHandlers(true);if(!this.inAggregatedView)w.init({autoResize:true,channelUrl:y.channel,hideOverflow:true,resizeWidth:false});};t(x,{allControllers:{},mainController:null,contextualControllers:{},initController:function(y){var z=new x(y),aa=y.controllerID;x.allControllers[aa]=z;if(z.inContextualDialog){x.contextualControllers[aa]=z;}else x.mainController=z;},syncController:function(y,z){var aa=x.allControllers[y];aa.attachClickHandlers();if(!aa.isControllingModerationQueue())return;aa.deselectComments(z);aa.registerModeratorQueueHandlers(false);aa.synchronizeModeratorQueueUI();},resetController:function(y){var z=x.allControllers[y];z.resetController();},appendComments:function(y,z,aa){var ba=x.allControllers[y];ba.appendComments(z,aa);},prependComments:function(y,z,aa){var ba=x.allControllers[y];ba.prependComments(z,aa);},updateController:function(y,z,aa,ba,ca,da,ea){var fa=x.allControllers[y];fa.updateController(z,aa,ba,ca,da,ea);if(!x.mainController.loggedIn)b('MultiLoginPopup').reattachLoginInterceptors();if(!fa.isControllingModerationQueue())return;fa.registerModeratorQueueHandlers(false);fa.synchronizeModeratorQueueUI();},updatePollingParamsCommentas:function(y,z){var aa=x.allControllers[y];aa.updatePollingParamsCommentas(z);},registerMoreCommentsLinkHandler:function(y,z){var aa=x.allControllers[y];aa.registerMoreCommentsLinkHandler(z);},replaceContentMaybe:function(y,z){var aa=l.scry(document.documentElement,y)[0];if(aa)l.replace(aa,z);},notifyCommentCreated:function(y){if(!x.mainController.channel)return;w.send({type:'commentCreated',href:y.href,parentCommentID:y.parentCommentID,commentID:y.commentID,message:y.message});},notifyCommentRemoved:function(y){if(!x.mainController.channel)return;w.send({type:'commentRemoved',href:y.href,commentID:y.commentID});},markAsShowingAllReplies:function(y){var z=y+' a.fbUpDownVoteOption',aa=l.scry(document.documentElement,z),ba=y+' li.fbUpDownVoteOption a.itemAnchor',ca=l.scry(document.documentElement,ba),da=aa.concat(ca);for(var ea=0;ea<da.length;ea++){var fa=da[ea],ga=new q(fa.getAttribute('ajaxify'));ga.addQueryData({show_all_replies:1});fa.setAttribute('ajaxify',ga.toString());}},setLoggedIn:function(y){x.mainController.loggedIn=y;},blacklistChangeListener:function(y,z,aa){var ba=s(z);m.listen(y,'change',function(){if(y.options[y.selectedIndex].value==aa){k.show(ba);}else k.hide(ba);});}});t(x.prototype,{isControllingModerationQueue:function(){var y=this==x.mainController&&this.inModerationQueue;return y;},resetController:function(){this.commentIDs=[];this.domIDs=[];},updateController:function(y,z,aa,ba,ca,da){y.forEach(function(fa){this.commentIDs.push(fa);},this);z.forEach(function(fa){this.domIDs.push(fa);},this);t(this.blacklistedActors,ba);for(var ea in ca){if(!this.actorToCommentInfoMap[ea])this.actorToCommentInfoMap[ea]=[];ca[ea].forEach(function(fa){this.actorToCommentInfoMap[ea].push(fa);},this);}this.newestCommentTimestamp=Math.max(this.newestCommentTimestamp,aa);t(this.commentInfoMap,da);this.attachClickHandlers();},updatePollingParamsCommentas:function(y){this.realTimePollingParams.commentas=y;},attachClickHandlers:function(){for(var y=0;y<this.domIDs.length;y++){var z='li[id="'+this.domIDs[y]+'"]',aa=l.scry(this.controlledRegion,z);if(aa.length===0)continue;var ba=aa[0],ca=l.scry(ba,'a.uiCloseButton');m.listen(ba,'mouseleave',this.closeStickyMenuFlyouts.bind(this,ca));var da=l.scry(ba,'.fbModerateDropdownContainer');if(da.length>0){var ea=da[0],fa=l.find(ea,'.fbModerateDropdownLink');m.listen(fa,'mouseover',function(oa,event){k.addClass(oa,'fbUnderlineText');}.bind(null,fa));m.listen(fa,'mouseout',function(oa,event){k.removeClass(oa,'fbUnderlineText');}.bind(null,fa));var ga=l.find(ea,'.fbModerationDropdownList');m.listen(fa,'click',this.exposeDropDownMenu.bind(this,fa,ga));m.listen(ga.parentNode,'mouseleave',this.concealDropDownMenu.bind(this,fa,ga));this.attachDropDownHandlers(ba,this.commentIDs[y],ga);}var ha=this.commentInfoMap[this.commentIDs[y]].actor,ia=!!this.recentlyBlacklistedActors[ha];if(ia){var ja=l.scry(ba,'.fbUndoBlacklistLink');if(ja.length>0){var ka=ja[0];m.listen(ka,'click',this.toggleBlackListAndSync.bind(this,this.commentIDs[y]));}}}var la=l.scry(this.controlledRegion,'.fbReplyButton'),ma=l.scry(this.controlledRegion,'.fbReplyAfterLoginButton');for(var na=0;na<la.length;na++)if(this.loggedIn){k.show(la[na]);k.hide(ma[na]);}else{k.hide(la[na]);k.show(ma[na]);}},closeStickyMenuFlyouts:function(y,event){p.hide();for(var z=0;z<y.length;z++)y[z].blur();},attachDropDownHandlers:function(y,z,aa){var ba=l.scry(aa,'.fbBanUser');if(ba.length>0){var ca=ba[0],da=l.find(ca,'^.fbFeedbackPost');if(v(da.id,z))m.listen(ca,'click',this.toggleBlackListAndSync.bind(this,z));}},exposeDropDownMenu:function(y,z,event){if(k.shown(z))return this.concealDropDownMenu(y,z,event);m.stop(event);k.show(z);z.focus();y.blur();var aa=l.find(document.documentElement,'.commentContent'),ba=r.getElementPosition(z).y+r.getElementDimensions(z).y-r.getElementDimensions(aa).y;if(ba>0){ba=ba+2;this.menuBuffer=l.create('div',{className:'menuBuffer',style:{height:ba+'px'}});l.appendContent(aa,this.menuBuffer);}return false;},concealDropDownMenu:function(y,z,event){m.stop(event);k.removeClass(y,'fbUnderlineText');k.hide(z);y.blur();if(this.menuBuffer){l.remove(this.menuBuffer);delete this.menuBuffer;}return false;},registerMoreCommentsLinkHandler:function(y){var z=y.pager_id;if(!u(z))return;var aa=s(z);m.listen(aa,'click',this.fetchMoreComments.bind(this,y,aa));},deselectComments:function(y){for(var z=0;z<y.length;z++)delete this.selectedCommentsMap[y[z]];},registerModeratorQueueHandlers:function(y){if(y)this.selectedCommentsMap={};this.selectableComments=this.findSelectableComments();this.selectableCheckboxes=[];this.selectAllCheckBoxes=l.scry(this.controlledRegion,'.fbSelectAllCheckbox');this.approveButtons=l.scry(this.controlledRegion,'.fbApproveButton');this.removeButtons=l.scry(this.controlledRegion,'.fbRemoveButton');for(var z=0;z<this.selectableComments.length;z++){var aa=this.selectableComments[z].id,ba=!!this.selectedCommentsMap[aa];this.setCommentSelection(this.selectableComments[z],ba);var ca=l.find(this.selectableComments[z],'.fbCommentCheckbox');m.listen(ca,'click',this.toggleCommentSelection.bind(this));m.listen(this.selectableComments[z],'click',this.toggleCommentSelection.bind(this));ca.checked=ba;this.selectableCheckboxes.push(ca);}for(var da=0;da<this.selectAllCheckBoxes.length;da++){this.selectAllCheckBoxes[da].checked=false;this.selectAllCheckBoxes[da].disabled=this.selectableComments.length===0;m.listen(this.selectAllCheckBoxes[da],'click',this.toggleSelectAllCheckbox.bind(this,this.selectAllCheckBoxes[da]));}for(var ea=0;ea<this.approveButtons.length;ea++)m.listen(this.approveButtons[ea],'click',this.setBulkPrivacy.bind(this,false));for(var fa=0;fa<this.removeButtons.length;fa++)m.listen(this.removeButtons[fa],'click',this.setBulkPrivacy.bind(this,true));},findSelectableComments:function(){var y=l.scry(this.controlledRegion,'.fbTopLevelComment'),z=[];for(var aa=0;aa<y.length;aa++)if((l.scry(y[aa],'.fbCommentCheckbox').length===1)&&(l.scry(y[aa],'.fbCommentOverlay').length===0))z.push(y[aa]);return z;},toggleCommentSelection:function(event){var y={a:true},z=event.getTarget(),aa=z.tagName.toLowerCase(),ba=z.parentNode.tagName.toLowerCase();if(y[aa]||y[ba])return;var ca=k.hasClass(z,'fbFeedbackPost')?z:l.find(z,'^.fbFeedbackPost'),da=this.commentIsSelected(ca),ea=!da;this.setCommentSelection(ca,ea);this.synchronizeModeratorQueueUI();if(k.hasClass(z,'fbCommentCheckbox'))m.stop(event);},commentIsSelected:function(y){return k.hasClass(y,'fbCommentSelected');},setCommentSelection:function(y,z){if(z){this.selectComment(y);}else this.deselectComment(y);},selectComment:function(y){k.addClass(y,'fbCommentSelected');this.selectedCommentsMap[y.id]=true;l.find(y,'.fbCommentCheckbox').checked=true;},deselectComment:function(y){k.removeClass(y,'fbCommentSelected');delete this.selectedCommentsMap[y.id];l.find(y,'.fbCommentCheckbox').checked=false;},toggleSelectAllCheckbox:function(y,event){m.stop(event);var z=y.checked;for(var aa=0;aa<this.selectableComments.length;aa++){this.setCommentSelection(this.selectableComments[aa],y.checked);this.selectableCheckboxes[aa].checked=z;}this.synchronizeBulkModerationCheckboxes(z);this.synchronizeBulkModerationButtons(z);},synchronizeModeratorQueueUI:function(){var y=0;for(var z=0;z<this.selectableCheckboxes.length;z++)if(this.selectableCheckboxes[z].checked)y++;var aa=this.selectableCheckboxes.length>0&&y==this.selectableCheckboxes.length;this.synchronizeBulkModerationCheckboxes(aa);this.synchronizeBulkModerationButtons(y>0);},synchronizeBulkModerationCheckboxes:function(y){for(var z=0;z<this.selectAllCheckBoxes.length;z++)this.selectAllCheckBoxes[z].checked=y;},synchronizeBulkModerationButtons:function(y){for(var z=0;z<this.approveButtons.length;z++)i.setEnabled(this.approveButtons[z],y);for(var aa=0;aa<this.removeButtons.length;aa++)i.setEnabled(this.removeButtons[aa],y);},setBulkPrivacy:function(y,event){m.stop(event);this.synchronizeBulkModerationButtons(false);var z=[];for(var aa in this.selectedCommentsMap)z.push(aa);var ba={is_private:y,in_moderation_queue:true,comment_ids:z,uniqids:z,controller_id:this.controllerID,locale:this.locale,owns_pages:this.userOwnsPages,in_aggregated_view:this.inAggregatedView,in_contextual_dialog:this.inContextualDialog};new h().setURI('/ajax/connect/comments/set_bulk_private.php').setData(ba).send();return false;},toggleBlackListAndSync:function(y,event){m.stop(event);var z=this.commentInfoMap[y].actor,aa={blacklist:!this.blacklistedActors[z],in_moderation_queue:this.inModerationQueue,comment_id:y,other_comment_ids:this.getOtherCommentsByActor(z,y),uniqid:y,controller_id:this.controllerID,locale:this.locale,owns_pages:this.userOwnsPages,in_aggregated_view:this.inAggregatedView,in_contextual_dialog:this.inContextualDialog};new h().setURI('/ajax/connect/comments/set_blacklist.php').setData(aa).setHandler(function(ba){this.blacklistedActors[z]=!this.blacklistedActors[z];if(this.blacklistedActors[z]){this.recentlyBlacklistedActors[z]=true;}else delete this.recentlyBlacklistedActors[z];}.bind(this)).send();return false;},getOtherCommentsByActor:function(y,z){return this.actorToCommentInfoMap[y].filter(function(aa){return aa!=z;});},fetchMoreComments:function(y,z,event){m.kill(event);k.addClass(z,'async_saving');if(this.fetchMoreCommentsIsPending[y.pager_id]===true)return;this.fetchMoreCommentsIsPending[y.pager_id]=true;var aa={is_reply_thread:false,in_moderation_queue:false,view_as_moderator:false};t(aa,y);var ba=l.scry(s(aa.controller_id),this.getCommentsSelector(aa));ba=ba.concat(l.scry(s(aa.controller_id),this.getCollapsedCommentsSelector(aa)));var ca=0,da=0;for(var ea=0;ea<ba.length;ea++)if(!k.hasClass(ba[ea],'fbCommentIgnored'))if(k.hasClass(ba[ea],'fbCommentHidden')){da++;}else ca++;aa.offset=ca;aa.hidden_offset=da;if(!aa.aggregate_view)delete aa.aggregate_view;if(!aa.comment_id)delete aa.comment_id;if(!aa.is_reply_thread)aa.comment_ids=this.commentIDs;if(!aa.commentas){var fa=x.allControllers[aa.controller_id];aa.commentas=fa.realTimePollingParams.commentas;}new h().setURI('/ajax/connect/feedback.php').setReadOnly(true).setData(aa).setHandler(function(ga){this.fetchMoreCommentsIsPending[y.pager_id]=false;}.bind(this)).send();},getCommentsSelector:function(y){var z=y.is_reply_thread?'li.fbCommentReply':'li.fbTopLevelComment';if(y.controller_id!=y.uniqid)z='div[id="'+y.uniqid+'"] '+z;return z;},getCollapsedCommentsSelector:function(y){var z=y.is_reply_thread?'div.fbCommentReply':'div.fbTopLevelComment';if(y.controller_id!=y.uniqid)z='div[id="'+y.uniqid+'"] '+z;return z;},getRecentlyBlacklistedActors:function(){var y=[];for(var z in this.recentlyBlacklistedActors)y.push(z);return y;},appendComments:function(y,z){var aa=u(y);if(!aa)return;var ba=l.scry(aa,'.fbFeedbackReplies')[0];if(!ba)return;l.appendContent(ba,z);},prependComments:function(y,z){var aa=l.scry(document.documentElement,y)[0];if(!aa)return;var ba=z.getNodes(),ca=[];for(var da=ba.length;da-->0;){var ea={id:l.getID(ba[da]),element:ba[da]};ca.push(ea);var fa=u(ea.id);if(fa){k.hide(ea.element);this.duplicateComments.push(ea.element);for(var ga=0;ga<ca.length;++ga)l.insertAfter(fa,ca[ga].element);ca=[];}}for(da=0;da<ca.length;++da)l.prependContent(aa,ca[da].element);setTimeout(this.removeDuplicateComments.bind(this),0);},removeDuplicateComments:function(){for(var y=0;y<this.duplicateComments.length;++y)l.remove(this.duplicateComments[y]);this.duplicateComments=[];},pollForComments:function(y){var z={locale:this.locale};t(z,y);if(!z.is_reply_thread)z.comment_ids=this.commentIDs;z.newest_comment_timestamp=this.newestCommentTimestamp;var aa=this.handlePollResponse.bind(this),ba=this.handlePollError.bind(this),ca=this.handlePollFinally.bind(this);new h().setURI('/plugins/comments/poll').setReadOnly(true).setData(z).setMethod('GET').setHandler(aa).setErrorHandler(ba).setFinallyHandler(ca).send();},handlePollResponse:function(y){},handlePollError:function(y){},handlePollFinally:function(y){}});e.exports=window.CommentAdminPanelController||x;},null);
__d("legacy:developer-comments-js",["CommentAdminPanelController"],function(a,b,c,d){a.CommentAdminPanelController=b('CommentAdminPanelController');},3);
__d("ConnectLogin",["PopupWindow","URI","WindowComm","XD"],function(a,b,c,d,e,f,g,h,i){var j=b('XD').XD,k={init:function(l){this.appID=l.appID;this.addToProfile=l.addToProfile;this.channelUrl=l.channelUrl;j.init(l);},login:function(l,m,n){this._openPopup(l,m,n);},logout:function(){j.send({type:'logout'});},_openPopup:function(l,m,n){n=n||{};var o=i.makeHandler(function(s){k._closePopup();if(k.appID)k._refreshLoginStatus();l&&l();}),p=i.makeHandler(function(s){k._closePopup();}),q=new h('/login.php');q.setQueryData({api_key:this.appID,next:o,channel_url:p,cancel_url:p,req_perms:m,v:'1.0',fbconnect:1,add_to_profile:this.addToProfile,display:'popup'});q.addQueryData(n);var r=this._getSize(n);this._popup=g.open(q.toString(),r.height,r.width);},_closePopup:function(){if(this._popup){this._popup.close();this._popup=null;}},_refreshLoginStatus:function(){if(this.channelUrl){j.send({type:'refreshLoginStatus'});}else window.location.reload();},_getSize:function(l){if(l.social_plugin=='registration'){return {width:640,height:370};}else return {width:610,height:280};}};e.exports=k;},null);
__d("legacy:connect-login",["ConnectLogin"],function(a,b,c,d){a.ConnectLogin=b('ConnectLogin');},3);
__d("legacy:feedback",["Feedback"],function(a,b,c,d){a.Feedback=b('Feedback');},3);
__d("legacy:dom",["DOM"],function(a,b,c,d){a.DOM=b('DOM');},3);
__d("ReferrerTools",[],function(a,b,c,d,e,f){e.exports.storeAncestorOrigins=function(g){if(!location||!location.ancestorOrigins)return;for(var h=0;h<location.ancestorOrigins.length;h++){var i=document.createElement('input');i.type='hidden';i.name='ancestor_origins[]';i.value=location.ancestorOrigins.item(h);g.appendChild(i);}};},null);
__d("PluginResize",["Locale","Log","UnverifiedXD","copyProperties","getOffsetParent","getStyleProperty"],function(a,b,c,d,e,f,g,h,i,j,k,l){function m(q){q=q||document.body;var r=0,s=k(q);if(g.isRTL()&&s){r=s.offsetWidth-q.offsetLeft-q.offsetWidth;}else if(!g.isRTL())r=q.offsetLeft;return n(q)+r;}function n(q){return Math.ceil(parseFloat(l(q,'width')))||q.offsetWidth;}function o(q){q=q||document.body;return q.offsetHeight+q.offsetTop;}function p(q,r,event,s){this.calcWidth=q||m;this.calcHeight=r||o;this.width=undefined;this.height=undefined;this.reposition=!!s;this.event=event||'resize';}j(p.prototype,{resize:function(){var q=this.calcWidth(),r=this.calcHeight();if(q!==this.width||r!==this.height){h.debug('Resizing Plugin: (%s, %s, %s, %s)',q,r,this.event,this.reposition);this.width=q;this.height=r;i.send({type:this.event,width:q,height:r,reposition:this.reposition});}return this;},auto:function(q){setInterval(this.resize.bind(this),q||250);return this;}});p.auto=function(q,event,r){return new p(m.bind(null,q),o.bind(null,q),event).resize().auto(r);};p.autoHeight=function(q,r,event,s){return new p(function(){return q;},o.bind(null,r),event).resize().auto(s);};e.exports=p;},null);